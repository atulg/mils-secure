/**
 * Additional language level units for RightJS
 *
 * Copyright (C) 2008-2009 Nikolay V. Nemshilov aka St. <nemshilov#gma-il>
 */
var Hash=new Class({initialize:function(o){this.$={};this.merge(o)},$:null,has:function(k){return(this.prototype[k]?this.$:this).hasOwnProperty(k)},set:function(k,v){(this.prototype[k]?this.$:this)[k]=v;return this},get:function(k){return(this.prototype[k]?this.$:this)[k]},remove:function(c,s){var f=$A(arguments),c=isFunction(c)?c:null,s=s||this;return this.each(function(k,v){if(c?c.apply(s,[k,v,this]):f.includes(k))delete((this.prototype[k]?this.$:this)[k])})},keys:function(){return this.map(function(k,v){return k})},values:function(){return this.map(function(k,v){return v})},empty:function(){var r=true;this.each(function(){r=false;$break()});return r},each:function(c,s){try{s=s||this;for(var k in this)if(!this.prototype[k])c.apply(s,[k,this[k],this]);for(var k in this.$)c.apply(s,[k,this.$[k],this])}catch(e){if(!(e instanceof Break))throw(e)}return this},map:function(c,s){var r=[],s=s||this;this.each(function(k,v){r.push(c.apply(s,[k,v,this]))});return r},filter:function(c,s){var r=new Hash,s=s||this;this.each(function(k,v){if(c.apply(s,[k,v,this]))r.set(k,v)});return r},reject:function(c,s){var r=new Hash,s=s||this;this.each(function(k,v){if(!c.apply(s,[k,v,this]))r.set(k,v)});return r},merge:function(){var a=arguments;for(var i=0;i<a.length;i++)if(isHash(a[i])){if(a[i]instanceof Hash)a[i].each(function(k,v){this.set(k,v)},this);else for(var b in a[i])this.set(b,a[i][b])}return this},toObject:function(){var o={};this.each(function(k,v){o[k]=v});return o},toQueryString:function(){return Object.toQueryString(this.toObject())}});var NumRange=new Class({initialize:function(s,e,a){this.start=s;this.end=e;this.step=(a||1).abs()*(s>e?1:-1)},each:function(c,s){var s=s||this;for(var v=this.start,i=0;v<this.end;v+=this.step)c.call(s,v,i++,this)},map:function(c,s){var r=[],s=s||this;this.each(function(v,a){r.push(c.call(s,v,a,this))});return r},filter:function(c,s){var r=[],s=s||this;this.each(function(v,a){if(c.call(s,v,a,this))r.push(v)});return r},reject:function(c,s){var r=[],s=s||this;this.each(function(v,a){if(!c.call(s,v,a,this))r.push(v)});return r}});if(String.prototype.trim.toString().include('return')){String.WSPS=[];$w("0009 000a 000b 000c 000d 0020 0085 00a0 1680 180e 2000 2001 2002 2003 2004 2005 "+"2006 2007 2008 2009 200a 200b 2028 2029 202f 205f 3000").each(function(k){String.WSPS[k.toInt(16)]=1});String.prototype.trim=function(){var s=this,l=this.length,i=0;if(l){while(String.WSPS[s.charCodeAt(--l)]);if(++l)while(String.WSPS[s.charCodeAt(i)])i++;s=s.substring(i,l)}return s}}function $H(o){return new Hash(o)};function $R(s,e,a){return new NumRange(s,e,a)};